var ge=Object.defineProperty,he=Object.defineProperties;var xe=Object.getOwnPropertyDescriptors;var H=Object.getOwnPropertySymbols;var ee=Object.prototype.hasOwnProperty,te=Object.prototype.propertyIsEnumerable;var J=(t,e,n)=>e in t?ge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,v=(t,e)=>{for(var n in e||(e={}))ee.call(e,n)&&J(t,n,e[n]);if(H)for(var n of H(e))te.call(e,n)&&J(t,n,e[n]);return t},C=(t,e)=>he(t,xe(e));var ne=(t,e)=>{var n={};for(var s in t)ee.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&H)for(var s of H(t))e.indexOf(s)<0&&te.call(t,s)&&(n[s]=t[s]);return n};import{r as l,R as o,C as Ae,d as Ne,a as Se}from"./vendor.c705f175.js";import{i as be,d as Ce,c as oe,p as We,a as De,X as Oe,b as Re,e as Me,f as Ie}from"./shared.c6bc5540.js";const ke=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function n(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerpolicy&&(r.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?r.credentials="include":a.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(a){if(a.ep)return;a.ep=!0;const r=n(a);fetch(a.href,r)}};ke();/**
 * Xpra Typescript Client React UI
 * @link https://github.com/andersevenrud/xpra-html5-client
 * @author Anders Evenrud <andersevenrud@gmail.com>
 * @license Mozilla Public License Version 2.0
 */function ze(t){if(t){const{image:e,xhot:n,yhot:s}=t;return`transparent url('${e}') no-repeat ${n}px ${s}px`}return""}function _e(t,e=""){if(t){const{image:n,xhot:s,yhot:a}=t,r=e?`, ${e}`:"";return`url('${n}') ${s} ${a}${r}`}return e}function se(t,e,n){let s="";const{width:a,height:r,x:i,y:u}=t.getBoundingClientRect(),p=e[0]-i,c=e[1]-u;return c<=n?s+="n":c>=r-n&&(s+="s"),p<=n?s+="w":p>=a-n&&(s+="e"),s}function ae(t){const{onDown:e,onMove:n,onRelease:s}=t();return a=>{a.preventDefault();const r=a.pageX,i=a.pageY;let u=!1;const p=y=>{const d=y.pageX-r,g=y.pageY-i;u=!0,n(y,d,g)},c=y=>{window.removeEventListener("mousemove",p),window.removeEventListener("mouseup",c),s(y,u)};window.addEventListener("mousemove",p),window.addEventListener("mouseup",c),e&&e(a.nativeEvent,r,i)}}function re({opacity:t}){if(typeof t=="number")return t<0?1:t/4294967296}/**
 * Xpra Typescript Client React UI
 * @link https://github.com/andersevenrud/xpra-html5-client
 * @author Anders Evenrud <andersevenrud@gmail.com>
 * @license Mozilla Public License Version 2.0
 */var h=(t=>(t.SetHost="SET_HOST",t.SetShowOptions="SET_SHOW_OPTIONS",t.AddWindow="ADD_WINDOW",t.RemoveWindow="REMOVE_WINDOW",t.SetWindowIcon="SET_WINDOW_ICON",t.SetConnected="SET_CONNECTED",t.SetCursor="SET_CURSOR",t.UpdateStats="UPDATE_STATS",t.MoveResizeWindow="MOVE_RESIZE_WINDOW",t.MaximizeWindow="MAXIMIZE_WINDOW",t.UpdateMetadata="UPDATE_METADATA",t.RaiseWindow="RAISE_WINDOW",t.AddNotification="ADD_NOTIFICATION",t.RemoveNotification="REMOVE_NOTIFICATION,",t.SetDraggingWindow="SET_DRAGGING_WINDOW",t.ClearWindows="CLEAR_WINDOWS",t.SetOption="SET_OPTION",t.UpdateMenu="UPDATE_MENU",t.SetError="SET_ERROR",t.SetStarted="SET_STARTED",t))(h||{});let ie=1;const q={connect:!1,host:"ws://127.0.0.1:10000",showOptions:!1,connected:!1,cursor:null,windows:[],notifications:[],activeWindow:0,draggingWindow:-1,actualDesktopSize:[0,0],stats:v({},be),options:v({},Ce),menu:[],error:"",started:!1};function Te(t,e){var s,a;const n=(r,i)=>{const u=t.windows,p=u.find(c=>c.id===r);return p&&Object.assign(p,i(p)),C(v({},t),{windows:u})};switch(e.type){case"SET_HOST":return C(v({},t),{host:e.payload});case"SET_SHOW_OPTIONS":return C(v({},t),{showOptions:e.payload});case"ADD_WINDOW":const r=!!e.payload.metadata.tray;return C(v({},t),{activeWindow:e.payload.id,windows:[...t.windows,{id:e.payload.id,minimized:e.payload.metadata.iconic===!0,maximized:!1,title:e.payload.metadata.title||String(e.payload.id),position:e.payload.position,dimension:e.payload.dimension,minDimension:(s=e.payload.metadata["size-constraints"])==null?void 0:s["minimum-size"],maxDimension:(a=e.payload.metadata["size-constraints"])==null?void 0:a["maximum-size"],opacity:re(e.payload.metadata),tray:r,zIndex:r?0:oe(e.payload,++ie)}]});case"REMOVE_WINDOW":const{windows:i}=t,u=i.findIndex(W=>W.id===e.payload);u!==-1&&i.splice(u,1);const p=i.length>0?i[i.length-1].id:0;return C(v({},t),{activeWindow:p,windows:i});case"SET_WINDOW_ICON":const c=e.payload;return n(c.wid,()=>({icon:c}));case"SET_CONNECTED":return C(v({},t),{started:!1,windows:e.payload?t.windows:[],connected:e.payload});case"SET_CURSOR":return C(v({},t),{cursor:e.payload});case"UPDATE_STATS":return C(v({},t),{stats:v(v({},t.stats),e.payload)});case"MOVE_RESIZE_WINDOW":const{wid:y,position:d,dimension:g}=e.payload;return n(y,W=>({position:d||W.position,dimension:g||W.dimension}));case"MAXIMIZE_WINDOW":const{maximize:x}=e.payload;return n(e.payload.wid,W=>({oldPosition:x?W.position:void 0,oldDimension:x?W.dimension:void 0,position:x?e.payload.position:W.oldPosition,dimension:x?e.payload.dimension:W.oldDimension,maximized:x}));case"UPDATE_METADATA":const{title:f,iconic:m}=e.payload.metadata;return n(e.payload.wid,W=>({opacity:re(e.payload.metadata),minimized:m===void 0?W.minimized:m===!0,title:f===void 0?W.title:f}));case"RAISE_WINDOW":return C(v({},n(e.payload.id,()=>({zIndex:oe(e.payload,++ie)}))),{activeWindow:e.payload.id});case"ADD_NOTIFICATION":return C(v({},t),{notifications:[...t.notifications,e.payload]});case"REMOVE_NOTIFICATION,":const{notifications:N}=t,R=N.findIndex(([W])=>W.id===e.payload);return R!==-1&&N.splice(R,1),C(v({},t),{notifications:N});case"SET_DRAGGING_WINDOW":return C(v({},t),{draggingWindow:e.payload});case"CLEAR_WINDOWS":return C(v({},t),{cursor:null,windows:[],notifications:[],draggingWindow:-1});case"SET_OPTION":const[I,D]=e.payload;return C(v({},t),{options:C(v({},t.options),{[I]:D})});case"UPDATE_MENU":return C(v({},t),{menu:e.payload});case"SET_ERROR":return C(v({},t),{error:e.payload});case"SET_STARTED":return C(v({},t),{started:e.payload});default:return t}}/**
 * Xpra Typescript Client React UI
 * @link https://github.com/andersevenrud/xpra-html5-client
 * @author Anders Evenrud <andersevenrud@gmail.com>
 * @license Mozilla Public License Version 2.0
 */const z=l.exports.createContext({wm:null,xpra:null,state:q,root:null,setRoot:()=>{},setCursor:()=>{},dispatch:()=>{}}),Ue=We(["connect"],[],["connect","host"]),Pe=De(),Xe=C(v(v({},q),Ue),{options:v(v({},q.options),Pe)}),Fe=({children:t,wm:e,xpra:n})=>{const[s,a]=l.exports.useReducer(Te,Xe),[r,i]=l.exports.useState(null),[u,p]=l.exports.useState(null),c=()=>{a({type:h.SetConnected,payload:!0}),a({type:h.SetError,payload:""})},y=E=>{a({type:h.SetConnected,payload:E!=="disconnected"}),a({type:h.ClearWindows})},d=E=>a({type:h.AddWindow,payload:E}),g=E=>a({type:h.RemoveWindow,payload:E}),x=E=>a({type:h.SetWindowIcon,payload:E}),f=E=>a({type:h.UpdateStats,payload:E}),m=E=>a({type:h.SetCursor,payload:E}),N=E=>a({type:h.MoveResizeWindow,payload:E}),R=E=>{const P=e.getWindow(E);P&&a({type:h.RaiseWindow,payload:P.attributes})},I=E=>a({type:h.UpdateMetadata,payload:E}),D=E=>{},W=async E=>a({type:h.AddNotification,payload:[E,await e.createNotification(E)]}),G=E=>a({type:h.RemoveNotification,payload:E}),B=E=>{if(u){const[P,L]=E.position;Object.assign(u.style,{left:`${P}px`,top:`${L}px`})}},U=E=>a({type:h.SetError,payload:E}),V=E=>a({type:h.UpdateMenu,payload:E}),Y=()=>a({type:h.SetStarted,payload:!0});return l.exports.useEffect(()=>(n.on("connect",c),n.on("disconnect",y),n.on("newWindow",d),n.on("removeWindow",g),n.on("windowIcon",x),n.on("pong",f),n.on("cursor",m),n.on("moveResizeWindow",N),n.on("updateWindowMetadata",I),n.on("raiseWindow",R),n.on("initiateMoveResize",D),n.on("showNotification",W),n.on("hideNotification",G),n.on("pointerPosition",B),n.on("newTray",d),n.on("updateXDGMenu",V),n.on("error",U),n.on("sessionStarted",Y),()=>{n.off("connect",c),n.off("disconnect",y),n.off("newWindow",d),n.off("removeWindow",g),n.off("windowIcon",x),n.off("pong",f),n.off("cursor",m),n.off("moveResizeWindow",N),n.off("updateWindowMetadata",I),n.off("raiseWindow",R),n.off("initiateMoveResize",D),n.off("showNotification",W),n.off("hideNotification",G),n.off("pointerPosition",B),n.off("newTray",d),n.off("updateXDGMenu",V),n.off("error",U),n.off("sessionStarted",Y)}),[]),l.exports.useEffect(()=>{s.connect&&n.connect(s.host,s.options)},[]),l.exports.useEffect(()=>{e.setDesktopElement(r)},[r]),l.exports.useEffect(()=>{e.setActiveWindow(s.activeWindow)},[s.activeWindow]),o.createElement(z.Provider,{value:{state:s,dispatch:a,root:r,wm:e,xpra:n,setRoot:i,setCursor:p}},t)};/**
 * Xpra Typescript Client React UI
 * @link https://github.com/andersevenrud/xpra-html5-client
 * @author Anders Evenrud <andersevenrud@gmail.com>
 * @license Mozilla Public License Version 2.0
 */const Be=300,F=({toggled:t,children:e,mountOnEnter:n=!0,unmountOnExit:s=!0})=>o.createElement(Ae,{in:t,timeout:Be,mountOnEnter:n,unmountOnExit:s,classNames:"fade-on-out"},e);var Ve="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAASdAAAEnQB3mYfeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAUdEVYdEF1dGhvcgBKYWt1YiBTdGVpbmVy5vv3LwAAADV0RVh0RGVzY3JpcHRpb24ASW52ZXJ0ZWQgdmFyaWFudCBvZiB0aGUgRE1aIGN1cnNvciB0aGVtZS5odVs8AAAAM3RFWHRTb3VyY2UAaHR0cDovL2ppbW1hYy5tdXNpY2hhbGwuY3ovdGhlbWVzLnBocD9za2luPTdQM5WxAAADwUlEQVRYhe2WTUhsZRjHf+PVcdLU48d1GkMvdwI185ZIzEYpaKttWqhcKhlFF65USjcK6equNFJbCEokiISiochQgfmBaI6CKGmg5MeIwpBXZpIRPec8LWb0Wte6c1SsRX94eDcvvD+er/8L/+sFEpFX/833o3Vd9zc3N78FxAIRdw0QKyISCAT8xcXFDuDlu4aIl5D8fr+voKDgbe44E/EiIu3t7eL3+8Xn8x3l5ua+GYIw3RlAeXm5FBUVSSAQEJ/Pd2i32x8BMbcBEVYqdV1nfn4ep9OJxWJJXFpa+t5msz0AXropRFgAmqahqiqTk5NUVVURGxtrXV1ddQFpgOUmEIYAVFVlYmKCuro6FEXJ8Hq93wE2IPq6EGEBiMgFgKqquFwuGhoaSE5Ofri/v/8t8Mp1IcIep8sAqqoyPj5Oa2srVqs1d29vbwiwAmajENcGUFWV4eFh2traSEtLy9/Z2fkGSDUKYWihXAUxMDBAZ2cn6enpjo2Nja+A+0YgDANcbsjz6O/vp6+vD7vd/t7a2tqXQAoQFQ6EIYC/NuPl6OnpYXBwkKysrPdXVla+CBfC8E6/6vHzrHR3dzM8PExOTs4HCwsLT4BkIPKfICKNAlwuAYDD4cBisWA2m4mOjmZxcZG8vDzy8/M/mpmZ+b2wsPAz4ClwZvQtCHlBSUmJABcRGRkpcXFxYrVaxe12y99J13WZnp5+Aii3lgGAsrIyxsbGUFWVrq4uent76ejo+GFoaOgns9l8bDKZxGQy6WazOSAivxJcUtfScxmora0VXdelpqZGEhISxGazyebmpni93qdAEfA6YAceAg8ILqiYWwFoaGgQXdfl9PRU9Xg8oiiKpKSkSH19vWiaJk1NTY0EvcEM3AtFBDcwqwuAxsZGERFZXFxcdzqdn2uaJtXV1aIoimRkZMjBwYEcHBx4gDe4oUM+BzA3Nye6rsvs7OwK8DFQcHR05Nna2hJFUSQ1NVVaWlpEVVWprKysIDh+t/Jtiz/v5qmpqSXgQ+ARkDw6OvpY0zSpqKiQpKQkyczMlOPjY1leXp4DXiO4hG4HYH5+/kegDMgF4ghOj+L3+/c2NjYkMTFRsrOz5fDwUNbX138OQd5KGWJ3d3e/Bt4Bsnn2LTcBUS6X6/HZ2Zlsb29LIBCQk5MTvbS0tCV017A1X6UoIJGgw8Xw57qagPiRkZFPPB7PL2632+1wOD4F3iXoA2H1wIsITQRHSQA9dF7WPYIluU/wg3oC/Ab4APWK+4YBwlEEz2ZeC8X54vrv6w+aYEf+AZkZtAAAAABJRU5ErkJggg==";/**
 * Xpra Typescript Client React UI
 * @link https://github.com/andersevenrud/xpra-html5-client
 * @author Anders Evenrud <andersevenrud@gmail.com>
 * @license Mozilla Public License Version 2.0
 */const Ye=10,le=16;let ce=!1;const Le=({win:t,bar:e,winstance:n})=>{const{oldPosition:s,oldDimension:a}=t,{wm:r,xpra:i,root:u,dispatch:p}=l.exports.useContext(z),c="w-4 h-4 rounded-full cursor-pointer bg-gradient-to-b shadow-inner hover:shadow",y=g=>{g.stopPropagation(),g.preventDefault()},d=()=>{if(e.current&&u)if(t.maximized)s&&a&&(r.maximize(n,s,a),p({type:h.MaximizeWindow,payload:{wid:t.id,maximize:!1}}));else{const x=e.current.offsetHeight,f=u.offsetWidth,m=u.offsetHeight-x;r.maximize(n,[0,x],[f,m]),p({type:h.MaximizeWindow,payload:{wid:t.id,position:[0,x],dimension:[f,m],maximize:!0}})}};return o.createElement("div",{className:"flex items-center space-x-2",onMouseDown:y},o.createElement("div",{title:"Minimize",className:`${c} from-green-300 to-green-500 hover:from-green-400`,onClick:()=>r.minimize(n)}),o.createElement("div",{title:"Maximize",className:`${c} from-blue-300 to-blue-500 hover:from-blue-400`,onClick:d}),!i.isReadOnly()&&o.createElement("div",{title:"Close",className:`${c} from-red-300 to-red-500 hover:from-red-400`,onClick:()=>r.close(n)}))},de=({win:{icon:t,title:e}})=>o.createElement(o.Fragment,null,t&&o.createElement("img",{alt:e,src:t.image,className:"max-h-full"}),!t&&o.createElement("div",{className:"w-full h-full bg-gray-500 rounded"})),K=({id:t})=>{const e=l.exports.useRef(null),{wm:n,state:s}=l.exports.useContext(z),a=n.getWindow(t),r=s.draggingWindow>=0?"pointer-events-none":"",i=c=>{n.mouseButton(a,c.nativeEvent,!0)},u=c=>{n.mouseButton(a,c.nativeEvent,!1)},p=c=>{c.preventDefault(),c.stopPropagation(),n.mouseMove(a,c.nativeEvent)};return l.exports.useEffect(()=>{e.current&&e.current.appendChild(a.canvas)},[e.current]),o.createElement("div",{ref:e,className:r,onMouseDown:i,onMouseUp:u,onMouseMove:p})},Ge=({win:t})=>{var $;const{id:e,position:n,dimension:s,title:a,minimized:r,maximized:i,opacity:u,zIndex:p,minDimension:c,maxDimension:y}=t,[d,g]=l.exports.useState("default"),{wm:x,dispatch:f,xpra:m}=l.exports.useContext(z),N=l.exports.useRef(null),R=l.exports.useRef(null),I=l.exports.useRef(null),D=x.getWindow(e),W={opacity:u,zIndex:p},G={cursor:d},B={toggled:!r,mountOnEnter:!1,unmountOnExit:!1},U=(w,b,S,A,O=!1)=>{N.current&&Object.assign(N.current.style,{left:`${w}px`,top:`${b}px`,width:`${S}px`,height:`${A}px`}),D!=null&&D.canvas&&Object.assign(D.canvas.style,{width:`${S}px`,height:`${A}px`}),O&&f({type:h.MoveResizeWindow,payload:{wid:e,position:[w,b],dimension:[S,A]}})},V=(w=!1)=>{const[b,S]=n,[A,O]=s;U(b,S,A,O,w)},Y=w=>(b,S,A,O,_)=>{const[k,X]=c||[100,100],[ve,ye]=y||[Number.MAX_VALUE,Number.MAX_VALUE];A=Math.min(ve,Math.max(k,A)),O=Math.min(ye,Math.max(X,O)),w(b,S,A,O,_)},E=Y((w,b,S,A)=>{!m.isReadOnly()&&!i&&U(w,b,S,A),L(!0)}),P=Y((w,b,S,A,O)=>{L(!1),!m.isReadOnly()&&!i&&(U(w,b,S,A,!0),O&&x.moveResize(D,[w,b],[S,A]))}),L=w=>{ce||f({type:h.SetDraggingWindow,payload:w?e:-1}),ce=w},Q=w=>{w.preventDefault(),w.stopPropagation(),x.raise(D),x.mouseButton(null,w.nativeEvent,!0),f({type:h.RaiseWindow,payload:D.attributes})},fe=Ne(w=>{if(I.current){const b=se(I.current,[w.pageX,w.pageY],le);g(`${b}-resize`)}else g("default")},Ye),Ee=l.exports.useCallback(ae(()=>{const[w,b]=s;let[S,A]=n;return{onMove(O,_,k){S=n[0]+_,A=n[1]+k,E(S,A,w,b),L(!0)},onRelease(O,_){P(S,A,w,b,_)}}}),[n,s]),we=l.exports.useCallback(ae(()=>{let w="",[b,S]=n,[A,O]=s;return{onDown(_,k,X){I.current&&(w=se(I.current,[k,X],le))},onMove(_,k,X){w.startsWith("n")?(O=s[1]-X,S=n[1]+X):w.startsWith("s")&&(O=s[1]+X),w.endsWith("w")?(A=s[0]-k,b=n[0]+k):w.endsWith("e")&&(A=s[0]+k),E(b,S,A,O)},onRelease(_,k){P(b,S,A,O,k)}}}),[I,n,s]);return l.exports.useEffect(()=>{V()},[n,s]),l.exports.useEffect(()=>{V()},[N]),l.exports.useEffect(()=>{const[w,b]=n,[S,A]=s;m.isReadOnly()||(w<=0||b<=0)&&(x.moveResize(D,[100,100],[S,A]),U(100,100,S,A,!0))},[]),($=D==null?void 0:D.attributes)!=null&&$.overrideRedirect?o.createElement(F,v({},B),o.createElement("div",{className:"absolute bg-black cursor-default shadow",ref:N,style:W,onMouseDown:Q},o.createElement(K,{id:e}))):o.createElement(F,v({},B),o.createElement("div",{ref:N,style:W,className:"absolute",onMouseDown:Q,onMouseMove:fe},o.createElement("div",{ref:I,className:"absolute z-10 -left-2 -top-10 -bottom-2 -right-2",style:G,onMouseDown:we}),o.createElement("div",{className:"relative w-full h-full z-20 outline outline-1 outline-gray-200 shadow-xl"},o.createElement("div",{className:"absolute -top-8 w-full flex items-center p-1 px-2 h-8 space-x-2 outline outline-1 outline-gray-200 bg-gray-100 cursor-default",ref:R,onMouseDown:Ee},o.createElement("div",{className:"flex items-center justify-center",style:{width:"16px",height:"16px"}},o.createElement(de,{win:t})),o.createElement("div",{className:"flex-grow truncate text-sm"},o.createElement("span",null,a||e)),o.createElement(Le,{winstance:D,win:t,bar:R,outer:N})),o.createElement("div",{className:"xpra-window-canvas w-full h-full bg-black"},o.createElement(K,{id:e})))))},He=({children:t})=>{const e=l.exports.createRef(),n=l.exports.createRef(),{wm:s,state:a,setRoot:r,setCursor:i}=l.exports.useContext(z),u=f=>{s.mouseMove(null,f.nativeEvent)},p=f=>{f.preventDefault()},c=l.exports.useCallback(f=>{s.mouseButton(null,f,!0)},[]),y=l.exports.useCallback(f=>{s.mouseButton(null,f,!1)},[]),d=v({dimension:[32,32],xhot:8,yhot:3,image:Ve},a.cursor||{}),g=`
.xpra-cursor {
  background: ${ze(d)};
}

.xpra-window-canvas {
  cursor: ${_e(a.cursor,"default")};
}
`,x=a.windows.filter(f=>!f.tray);return l.exports.useEffect(()=>{e.current&&r(e.current)},[e.current]),l.exports.useEffect(()=>{n.current&&i(n.current)},[n.current]),o.createElement(o.Fragment,null,o.createElement("div",{id:"xpra-desktop",className:"absolute inset-0 z-30 overflow-hidden bg-gradient-to-br from-emerald-500 via-emerald-300 to-emerald-500",ref:e,onMouseMove:u,onContextMenu:p,onMouseDown:c,onMouseUp:y},a.connected&&x.map(f=>o.createElement(Ge,{key:f.id,win:f})),t),o.createElement("div",{ref:n,className:"xpra-cursor absolute z-50"}),o.createElement("style",null,g))};/**
 * Xpra Typescript Client React UI
 * @link https://github.com/andersevenrud/xpra-html5-client
 * @author Anders Evenrud <andersevenrud@gmail.com>
 * @license Mozilla Public License Version 2.0
 */let ue=1;const Ze=({disabled:t,label:e,value:n,required:s,options:a,onChange:r})=>{const i=`xpra_${++ue}`,u="rounded bg-white border border-black-100 w-full p-1 disabled:opacity-20 disabled:cursor-not-allowed";return o.createElement("div",null,e&&o.createElement("label",{htmlFor:i},e),o.createElement("div",null,o.createElement("select",{className:u,id:i,required:s,disabled:t,defaultValue:n,onChange:r},Object.entries(a).map(([p,c])=>o.createElement("option",{key:p,value:p},c)))))},T=({children:t,disabled:e,label:n,type:s,transparent:a,onClick:r})=>{let i="flex items-center justify-center relative rounded w-full p-1 disabled:opacity-20 disabled:cursor-not-allowed hover:outline hover:outline-1";return a?i+=" border border border-transparent":i+=" bg-white border border-black-100",o.createElement("button",{className:i,disabled:e,type:s||"button",onClick:r},n||t)},Z=({disabled:t,label:e,value:n,type:s,placeholder:a,required:r,onChange:i})=>{const u=`xpra_${++ue}`,p="rounded bg-white border border-black-100 w-full p-1 disabled:opacity-20 disabled:cursor-not-allowed";return o.createElement("div",null,e&&o.createElement("label",{htmlFor:u},e),o.createElement("div",null,o.createElement("input",{type:s||"text",className:p,id:u,placeholder:a,required:r,disabled:t,defaultValue:n,onInput:i})))},M=({label:t,value:e,onChange:n})=>o.createElement("div",{className:"select-none"},o.createElement("label",{className:"inline-flex items-center space-x-2 cursor-pointer"},o.createElement("input",{type:"checkbox",defaultChecked:e,onChange:n}),o.createElement("span",null,t)));/**
 * Xpra Typescript Client React UI
 * @link https://github.com/andersevenrud/xpra-html5-client
 * @author Anders Evenrud <andersevenrud@gmail.com>
 * @license Mozilla Public License Version 2.0
 */const qe=["shadow-lg","bg-emerald-100/50","opacity-90","rounded"],me=(...t)=>t.join(" "),pe=({items:t,onCallback:e=()=>{},root:n=!0})=>{const s=l.exports.useRef(null),[a,r]=l.exports.useState(-1),i=["max-h-96","max-w-xs"];n?i.push("top-full","left-0"):i.push("top-0","left-full","overflow-auto");const u=y=>r(y),p=()=>r(-1),c=y=>{y&&y(),e()};if(n){const y=d=>{if(s.current){const g=d.target;g&&(s.current.contains(g)||g===s.current.parentNode)||c()}};l.exports.useEffect(()=>(document.addEventListener("click",y),()=>{document.removeEventListener("click",y)}),[s])}return o.createElement("div",{ref:s,className:me("absolute","shadow","bg-emerald-100/80",...i),onMouseLeave:p},t.map(({icon:y,title:d,items:g,callback:x},f)=>o.createElement("div",{key:f,className:"relative text-left"},o.createElement("div",{className:"p-2 hover:bg-white truncate flex space-x-2 items-center",onClick:()=>c(x),onMouseOver:()=>u(f)},y&&o.createElement("img",{src:y,className:"w-4 h-4"}),o.createElement("span",null,d)),a===f&&g&&g.length>0&&o.createElement(pe,{root:!1,items:g}))))},j=({classNames:t,children:e})=>{const n=me("absolute","z-50",...qe,...t);return o.createElement("div",{className:n},e)},Ke=()=>{const{xpra:t,state:e,dispatch:n}=l.exports.useContext(z),s=e.showOptions?"Hide options":"Show options",a=(d,g)=>n({type:h.SetOption,payload:[d,g]}),r=[{key:"reconnect",label:"Automatically reconnect",component:M},{key:"shareSession",label:"Share Session",component:M},{key:"stealSession",label:"Steal Session",component:M},{key:"clipboard",label:"Clipboard",component:M},{key:"clipboardImages",label:"Clipboard Images",component:M},{key:"fileTransfer",label:"File Transfer",component:M},{key:"printing",label:"Printing",component:M},{key:"bell",label:"Bell",component:M},{key:"notifications",label:"Notifications",component:M},{key:"openUrl",label:"Open URLs",component:M},{key:"audio",label:"Audio",component:M},{key:"showStartMenu",label:"XDG Menu",component:M},{key:"swapKeys",label:"Swap Ctrl and Cmd key",component:M},{key:"reverseScrollX",label:"Reverse X scroll",component:M},{key:"reverseScrollY",label:"Reverse Y scroll",component:M},{key:"keyboardLayout",label:"Keyboard Layout",component:Ze,options:Oe}].map(d=>C(v({},d),{value:e.options[d.key],onChange:g=>a(d.key,g.target.value)})),i=d=>n({type:h.SetHost,payload:d.target.value}),u=d=>a("username",d.target.value),p=d=>a("password",d.target.value),c=d=>{d.preventDefault(),n({type:h.SetError,payload:""}),t.connect(e.host,e.options)},y=()=>n({type:h.SetShowOptions,payload:!e.showOptions});return o.createElement(j,{classNames:["p-8","top-1/2","left-1/2 transform","-translate-x-1/2","-translate-y-1/2","w-96","max-w-full","max-h-full","overflow-auto"]},o.createElement("form",{className:"space-y-4",onSubmit:c},o.createElement("div",{className:"space-y-2"},o.createElement(Z,{required:!0,placeholder:"Host",value:e.host,onChange:i}),o.createElement("div",{className:"flex space-x-2"},o.createElement(Z,{placeholder:"Username",value:e.options.username,onChange:u}),o.createElement(Z,{type:"password",placeholder:"Password",value:e.options.password,onChange:p}))),e.error&&o.createElement("div",{className:"bg-red-300 border border-red-500 text-red-500 p-2 rounded"},e.error),o.createElement("div",{className:"flex space-x-2"},o.createElement(T,{label:"Connect",type:"submit"}),o.createElement(T,{label:s,onClick:y})),o.createElement(F,{toggled:e.showOptions},o.createElement("div",{className:"px-2 text-sm"},r.map(f=>{var m=f,{component:d,key:g}=m,x=ne(m,["component","key"]);const N=d;return o.createElement(N,v({key:g},x))})))))},je=()=>{const{state:t}=l.exports.useContext(z),e=[["Last server ping",t.stats.lastServerPing],["Last client echo",t.stats.lastClientEcho],["Client ping latency",t.stats.clientPingLatency],["Server ping latency",t.stats.serverPingLatency],["Server load",t.stats.serverLoad.join(" / ")],["Window count",t.windows.length]];return o.createElement("div",{className:"absolute bottom-1 left-1 p-1 z-0 opacity-50 bg-emerald-100 rounded"},o.createElement("table",{className:"text-xs"},o.createElement("tbody",null,e.map(([n,s])=>o.createElement("tr",{key:n},o.createElement("td",{className:"p-1"},n),o.createElement("td",{className:"p-1 text-right text-gray-500"},s))))))},Qe=()=>{const{wm:t,state:e,dispatch:n,xpra:s}=l.exports.useContext(z),[a,r]=l.exports.useState(!1),i=e.windows.filter(m=>m.minimized),u=e.windows.filter(m=>m.tray),p=[...e.menu.map(m=>({title:m.name,icon:m.icon,items:m.entries.map(N=>({title:N.name,icon:N.icon,callback:()=>{s.sendStartCommand(N.name,N.exec,!1)}}))})),{title:"Server",items:[{title:"Shutdown server",callback:()=>{confirm("Are you sure you want to shut down the server ?")&&s.sendShutdown()}}]}],c=()=>s.disconnect(),y=m=>N=>{N.stopPropagation(),N.preventDefault();const R=t.getWindow(m.id);R&&(t.restore(R),t.raise(R),n({type:h.RaiseWindow,payload:R.attributes}))},d=()=>r(!a),g=()=>{r(!1)},x=()=>s.clipboard.poll(),f=async()=>{(await Re()).forEach(({buffer:N,name:R,size:I,type:D})=>s.sendFile(R,D,I,N))};return o.createElement(j,{classNames:["top-1","left-1/2","-translate-x-1/2","p-1","select-none"]},o.createElement("div",{className:"flex space-x-4 px-2"},o.createElement("div",{className:"flex space-x-1"},e.menu.length>0&&o.createElement(T,{transparent:!0,onClick:d},o.createElement("i",{className:"fa fa-bars pointer-events-none"}),o.createElement(F,{toggled:a},o.createElement(pe,{items:p,onCallback:g}))),o.createElement(T,{transparent:!0,onClick:c},o.createElement("i",{className:"fa fa-unlink"})),e.options.clipboard&&o.createElement(T,{transparent:!0,onClick:x},o.createElement("i",{className:"fa fa-clipboard"})),e.options.fileTransfer&&o.createElement(T,{transparent:!0,onClick:f},o.createElement("i",{className:"fa fa-upload"}))),i.length>0&&o.createElement("div",{className:"flex space-x-1"},i.map(m=>o.createElement(T,{key:m.id,transparent:!0,onClick:y(m)},o.createElement("div",{className:"flex space-x-1 items-center",style:{maxWidth:"128px"}},o.createElement("div",{className:"w-4 h-4"},o.createElement(de,{win:m})),o.createElement("div",{className:"truncate text-center text-sm"},m.title))))),u.length>0&&o.createElement("div",{className:"flex space-x-1"},u.map(m=>o.createElement("div",{key:m.id,className:"flex space-x-1 items-center"},o.createElement("div",{className:"flex items-center justify-center w-4 h-4 overflow-hidden",title:m.title},o.createElement(K,{id:m.id})))))))},$e=()=>{const{state:t,xpra:e}=l.exports.useContext(z),n=()=>e.disconnect();return o.createElement(j,{classNames:["p-8","top-1/2","left-1/2 transform","-translate-x-1/2","-translate-y-1/2","w-96"]},o.createElement("div",{className:"space-y-4"},o.createElement("div",{className:"text-center"},"Connecting to ",t.host),o.createElement("div",null,o.createElement(T,{onClick:n},"Cancel"))))};/**
 * Xpra Typescript Client React UI
 * @link https://github.com/andersevenrud/xpra-html5-client
 * @author Anders Evenrud <andersevenrud@gmail.com>
 * @license Mozilla Public License Version 2.0
 */function Je(){const{state:t}=l.exports.useContext(z);return o.createElement(o.Fragment,null,o.createElement(F,{toggled:!t.connected},o.createElement(Ke,null)),o.createElement(F,{toggled:!t.started&&t.connected},o.createElement($e,null)),o.createElement(He,null,t.connected&&o.createElement(je,null)),o.createElement(F,{toggled:t.started},o.createElement(Qe,null)))}function et({xpra:t,wm:e}){return o.createElement(Fe,{wm:e,xpra:t},o.createElement(Je,null))}function tt(){return new Worker("assets/worker.a07de11f.js",{type:"module"})}/**
 * Xpra Typescript Client Example
 * @link https://github.com/andersevenrud/xpra-html5-client
 * @author Anders Evenrud <andersevenrud@gmail.com>
 * @license Mozilla Public License Version 2.0
 */async function nt(){const t=document.querySelector("#app"),e=new tt,n=new Me({worker:e}),s=new Ie(n);await n.init(),s.init(),t&&Se.render(l.exports.createElement(et,{xpra:n,wm:s}),t)}window.addEventListener("DOMContentLoaded",()=>{nt()});
//# sourceMappingURL=index.1127259a.js.map
